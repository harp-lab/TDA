<html>
<head>
    <script src="ripser.js"></script>
</head>
<body>
<script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
        integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
<script>
    // Example adjacency matrix (replace this with your own data)
    const adjacencyMatrix = [
        [0, 2.83, 6.08, 6.08, 3.6],
        [2.83, 0, 4.12, 5, 4.12],
        [6.08, 4.12, 0, 2, 4.24],
        [6.08, 5, 2, 0, 3.16],
        [3.6, 4.12, 4.24, 3.16, 0]
    ];

    // Convert adjacency matrix to edge list
    const edgeList = [];
    const numNodes = adjacencyMatrix.length;

    for (let i = 0; i < numNodes; i++) {
        for (let j = i + 1; j < numNodes; j++) {
            if (adjacencyMatrix[i][j] === 1) {
                edgeList.push([i, j]);
            }
        }
    }

    // Convert edge list to point cloud data
    const pointCloud = edgeList.map(edge => [(edge[0] + edge[1]) / 2.0]);

    // Ripser options
    const options = {
        format: 'pointcloud', // Input data format ('distance' or 'pointcloud')
        threshold: 1.0,        // Maximum distance to consider (useful for sparse datasets)
    };

    $(document).ready(function () {
        // Call Ripser to compute 1-dimensional persistence
        window.ripser.computeRipser({points: pointCloud}, options)
            .then(result => {
                // Result contains the persistence diagram for dimension 1
                const persistenceDiagram = result['dgms'][1];
                console.log('1-D Persistence Diagram:', persistenceDiagram);
            })
            .catch(error => {
                console.error('Error computing persistence:', error);
            });
    })

</script>
</body>
</html>